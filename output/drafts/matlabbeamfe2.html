<!DOCTYPE html>
<html lang="en">
<head>
  <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic'>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="//amit.visrolia.net/theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="//amit.visrolia.net/theme/stylesheet/tipuesearch.css">
  <link rel="stylesheet" type="text/css" href="//amit.visrolia.net/theme/stylesheet/style.min.css">
  <link rel="stylesheet" type="text/css" href="//amit.visrolia.net/theme/stylesheet/style.local.css">
  <link rel='manifest' href='//amit.visrolia.net/manifest.json'>

  <link href="//amit.visrolia.net/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Amit's notes Atom">
  <link rel="shortcut icon" href="//amit.visrolia.net/favicon.ico" type="image/png">
  <link rel="icon" href="//amit.visrolia.net/favicon.ico" type="image/png">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <!-- Chrome, Firefox OS and Opera -->
  <meta name="theme-color" content="#333333">
  <!-- Windows Phone -->
  <meta name="msapplication-navbutton-color" content="#333333">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<meta name="author" content="Amit" />
<meta name="description" content="Completing the beam FE program \section{Aligned boundary conditions in the solver} \begin{frame}{\mode<presentation>{Aligned boundary conditions in the solver}} The code developed for the solver in the previous lecture applied boundary conditions only in the global coordinate system ($u=0$ or $v=0$). To make the code ..." />
<meta name="keywords" content="matlab, code, teaching, bath">
<meta property="og:site_name" content="Amit's notes"/>
<meta property="og:title" content="Introduction to Matlab: lecture 4"/>
<meta property="og:description" content="Completing the beam FE program \section{Aligned boundary conditions in the solver} \begin{frame}{\mode<presentation>{Aligned boundary conditions in the solver}} The code developed for the solver in the previous lecture applied boundary conditions only in the global coordinate system ($u=0$ or $v=0$). To make the code ..."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="//amit.visrolia.net/drafts/matlabbeamfe2.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2011-11-15 00:00:00+00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="//amit.visrolia.net/author/amit.html">
<meta property="article:section" content="Notes"/>
<meta property="article:tag" content="matlab"/>
<meta property="article:tag" content="code"/>
<meta property="article:tag" content="teaching"/>
<meta property="article:tag" content="bath"/>
<meta property="og:image" content="">

  <title>Amit's notes &ndash; Introduction to Matlab: lecture 4</title>
</head>
<body>
  <aside>
    <div>
      <a href="//amit.visrolia.net/">
        <img src="//amit.visrolia.net/theme/img/profile.png" alt="Amit" title="Amit">
      </a>
      <h1><a href="//amit.visrolia.net/">Amit</a></h1>

      <!--<p>Notes, links, and pictures</p>-->
      
      <p><a href="//amit.visrolia.net/category/notes.html" alt="Notes">Notes</a>, <a href="//amit.visrolia.net/category/links.html" alt="Links">links</a>, and <a href="//amit.visrolia.net/category/pictures.html" alt="Pictures">pictures</a></p>

      <nav>
        <ul class="list">
          <li><a href="//amit.visrolia.net/pages/amit.html#amit">About&nbsp;me</a></li>
          <li><a href="//amit.visrolia.net/pages/credits.html#credits">Credits</a></li>

        </ul>
      </nav>

      <form id="tipue_search_form" action="//amit.visrolia.net/search.html" onsubmit="return (this.elements['q'].value.length > 0)">
        <input id="tipue_search_input" name="q" type="search" autocomplete="off" placeholder="Search" required>
      </form>
      
      <ul class="social">
        <li><a class="sc-xlinkedin" href="https://uk.linkedin.com/in/amitvisrolia" target="_blank"><i class="fa fa-xlinkedin"></i></a></li>
        <li><a class="sc-github" href="https://github.com/amitviz" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-rss" href="/feeds/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    
      
    </div>
  </aside>
  <main>

<article>
  <header>
    <h1 id="matlabbeamfe2">Introduction to Matlab: lecture&nbsp;4</h1>
    <p>
          Posted on November 15, 2011 in <a href="//amit.visrolia.net/category/notes.html">Notes</a>


    </p>
  </header>
  <div>
    <h1>Completing the beam <span class="caps">FE</span>&nbsp;program</h1>
<p>\section{Aligned boundary conditions in the&nbsp;solver}</p>
<div class="math">\begin{frame}{\mode&lt;presentation&gt;{Aligned boundary conditions in the solver}}
  The code developed for the solver in the previous lecture applied boundary conditions only in the global coordinate system ($u=0$ or $v=0$). To make the code a bit more general, we should handle aligned supports ($u'=0$ or $v'=0$).
  \begin{center}
  \includefigure{width=0.4\textwidth}{width=0.3\textwidth}{alignedbc}
  \end{center}
\end{frame}</div>
<div class="math">\begin{frame}{Solution vector}
\begin{columns}
  \column{0.5\textwidth} Instead of solving for the a solution vector of the form:
 \begin{align}
  \mathbf{u} &amp;= 
  \begin{Bmatrix}
    u_1\\v_1\\u_2\\v_2\\u_3\\v_3
  \end{Bmatrix}
 \end{align}
  \column{0.5\textwidth} we can look first for a solution of the form:
 \begin{align}
  \mathbf{u^\ast} &amp;=
  \begin{Bmatrix}
    u_1\\v_1\\u_2\\v_2\\u'_3\\v'_3
  \end{Bmatrix}
 \end{align}
\end{columns}
where $\mathbf{u^\ast} = \mathbf{T}\mathbf{u}$, and 
\begin{align}
  \mathbf{T} &amp;= \begin{bmatrix}
         I &amp; 0 &amp; 0 \\
         0 &amp; I &amp; 0 \\
         0 &amp; 0 &amp; t_3
       \end{bmatrix}
\end{align}
and $t_3$ is the transformation matrix for the orientation of the third node. We already have a function that calculates the transformation matrix.
\end{frame}</div>
<div class="math">\begin{frame}{Implementing the boundary conditions}
  The information required for aligned boundary conditions is:
\begin{itemize}
  \item the node
  \item the orientation
  \item the restrained degrees of freedom
\end{itemize}
Instead of listing all the nodes as we have done previously for globally oriented boundary conditions, we can list just the required information:
\mfile{alignedbc.m}
e.g. to constrain node 2 of element 3 to only move in the $x'$ direction:
\mfile{alignedbcexample.m}
\end{frame}</div>
<div class="math">\begin{frame}{Writing the MATLAB code}
  Writing the MATLAB code should be easy: we've already covered the loops and logic, and some of the functions (e.g. the transform matrix) already exist. Some other elements that need to change are:
  \begin{itemize}
    \item $\mathbf{F^\ast} = \mathbf{T}\mathbf{F}$
    \item $\mathbf{K^\ast} = \mathbf{T}\mathbf{K}\mathbf{T}^T$
  \end{itemize}
Remember, we're now solving the system:
\begin{align}
  \mathbf{K^\ast}\mathbf{u^\ast} &amp;= \mathbf{F^\ast}
\end{align}
for the unknown vector $\mathbf{u^\ast}$: to get the global displacements ($\mathbf{u}$) back, we need to calculate:
\begin{align}
  \mathbf{u} &amp;= \mathbf{T}^T\mathbf{u^\ast}
\end{align}
(recall that $\mathbf{T}^{-1} = \mathbf{T}^T$) 
\end{frame}</div>
<p>\section{`Frame&#8217; elements and shape&nbsp;functions}</p>
<p>\begin{frame}{\mode<presentation>{Shape functions and `frame' elements}}
  A frame element can sustain a bending moment or a transverse load. (Unlike the truss&nbsp;element.)</p>
<p>Each node on the frame element has 3 degrees of&nbsp;freedom:
  </p>
<div class="math">\begin{itemize}
   \item displacement in $x$-direction ($u$)
   \item displacement in $y$-direction ($v$)
   \item rotation ($\phi$)
  \end{itemize}</div>
<div class="math">\begin{center}
    %\includefigure{width=0.5\textwidth}{width=0.32\textwidth}{frameelementlocal}
    \mode&lt;presentation&gt;{\def\svgwidth{0.5\textwidth}}
    \mode&lt;article&gt;{\def\svgwidth{0.32\textwidth}}
    \input{./figures/frameelementlocaltex.tex}
  \end{center}</div>
<p>
\end{frame}</p>
<p>\begin{frame}{Frame element stiffness matrix}
The terms in the stiffness matrix can still be calculated&nbsp;directly.</p>
<p>The stiffness matrix for a 2-node frame element, with a solution vector of the form <span class="math">\(\mathbf{u}'_e = [u'_1, v'_1, \phi_1, u'_2, v'_2, \phi_2]^T\)</span>&nbsp;is:
 </p>
<div class="math">\begin{align}
   \mathbf{K}'_{e} = 
   \begin{bmatrix}
      k_{r} &amp;  0       &amp;  0           &amp; -k_{r} &amp;  0       &amp; 0           \\
      0     &amp;  12k_{b} &amp;  6Lk_{b}     &amp;  0     &amp; -12k_{b} &amp; 6Lk_{b}     \\
      0     &amp;  6k_{b}  &amp;  4L^{2}k_{b} &amp;  0     &amp;  -6k_{b} &amp; 2L^{2}k_{b} \\
     -k_{r} &amp;  0       &amp;  0           &amp;  k_{r} &amp;  0       &amp; 0           \\
      0     &amp; -12k_{b} &amp; -6Lk_{b}     &amp;  0     &amp;  12k_{b} &amp; -6Lk_{b}    \\
      0     &amp;  6k_{b}  &amp;  2L^{2}k_{b} &amp;  0     &amp;  -6k_{b} &amp; 4L^{2}k_{b}
   \end{bmatrix}
 \end{align}</div>
<p>
where
 </p>
<div class="math">\begin{align}
  k_{r} &amp;= \frac{AE}{L} &amp; k_{b} &amp;= \frac{EI}{L^3}
 \end{align}</div>
<p>
\end{frame}</p>
<p>\begin{frame}{Solution of frame element system}
 The global stiffness matrix is formed in the same way it was for the truss element: only now, each node has 3&nbsp;degrees-of-freedom.</p>
<p>The element local displacement and element global force vectors take the&nbsp;form:
 </p>
<div class="math">\begin{align}
  \mathbf{u}'_e &amp;= \begin{Bmatrix}u'_1 \\ v'_1 \\ \phi_1 \\ u'_2 \\ v'_2 \\ \phi_2\end{Bmatrix}
  &amp;
  \mathbf{F}_e &amp;= \begin{Bmatrix}F_x \\ F_y \\ M \\ F_x \\ F_y \\ M\end{Bmatrix}
 \end{align}</div>
<p>The transformation matrix <span class="math">\(\mathbf{T}\)</span> needs to be modified to account for this extra degree of freedom. A rotational transform to the global coordinate system does not affect the nodal rotations or applied moments (i.e. <span class="math">\(\phi = \phi'\)</span>, <span class="math">\(M = M'\)</span>), so we can just insert the identity (i.e. <span class="math">\(1\)</span>) in the relevant degrees-of-freedom.&nbsp;\end{frame}</p>
<p>\begin{frame}{Postprocessing frame elements}
 The truss element exhibits uniform strain, i.e. the strain does not vary with <span class="math">\(x'\)</span>. The frame element is capable of varying the strain along its length. Additionally, the element defines displacement (and hence strains) in the <span class="math">\(y'\)</span> direction. To determine displacement (and other derived quantities) at a point, we require the use of shape&nbsp;functions.</p>
<p>If <span class="math">\(\xi\)</span> is a parametric coordinate along the length of the element, the displacements at any value of <span class="math">\(\xi\)</span> can be given&nbsp;by:
 </p>
<div class="math">\begin{align}
  u'_{x}(\xi) &amp;= \sum_{i=1}^{n} N_{i}(\xi) u'_{x,n}\\
  \mathbf{u}'(\xi) &amp;= \mathbf{N}(\xi)\mathbf{u}'_e \\
  \begin{Bmatrix}u'(\xi) \\ v'(\xi)\end{Bmatrix} &amp;=
  \begin{bmatrix}
   N_{1x} &amp; 0 &amp; 0 &amp; N_{2x} &amp; 0 &amp; 0 \\
   0 &amp; N_{1y} &amp; N_{1\theta} &amp; 0 &amp; N_{2y} &amp; N_{2\theta} 
  \end{bmatrix}
  \begin{Bmatrix}
   u'_1 \\ v'_1 \\ \phi_1 \\ u'_2 \\ v'_2 \\ \phi_2
  \end{Bmatrix} \label{eq:shapefunction}
 \end{align}</div>
<p>
\end{frame}</p>
<div class="math">\begin{frame}{Shape functions for frame elements}
The shape functions for a frame element are defined for $-1\le\xi\le1$, and requires the length of the element $L$:
 \begin{align}
  N_{1x}(\xi) &amp;= (1-\xi)/2 \nonumber \\
  N_{1y}(\xi) &amp;= [1-\xi(3-\xi^2)/2]/2 \nonumber \\
  N_{1\theta}(\xi) &amp;= \frac{L(1-\xi^2)}{8}(1-\xi) \nonumber \\
  N_{2x}(\xi) &amp;= (1+\xi)/2 \nonumber \\
  N_{2y}(\xi) &amp;= [1+\xi(3-\xi^2)/2]/2 \nonumber \\
  N_{2\theta}(\xi) &amp;= \frac{-L(1-\xi^2)}{8}(1+\xi) \label{eq:shapefunctions}
 \end{align}
In MATLAB, we can write a function to return the shape function matrix:
 \mfile{shapefunction.m}
\end{frame}</div>
<p>\begin{frame}{Determining the displacement in <span class="caps">MATLAB</span>}
 Once the shape function matrix <span class="math">\(\mathbf{N}\)</span> is known, the displacements at any point can be determined.
 \mfile{displacements.m}
 where \mcode{ue_local} are the element nodal displacements. \mcode{ue_local} is determined by picking out the relevant nodal displacements for the element of interest from the global solution vector, and transforming back to the element&#8217;s local coordinate system <span class="math">\((x',y')\)</span>.</p>
<p>To get displacements along the element, we can increment <span class="math">\(\xi\)</span>, e.g. \mcode{xi = -1:0.1:1}.&nbsp;\end{frame}</p>
<p>\begin{frame}{Derived quantities}
 Once displacements are known, the derived quantities (strains and stresses) can be calculated. The strain and bending moment are given&nbsp;by:
</p>
<div class="math">\begin{columns}
 \column{0.5\textwidth}
 \begin{align}
  \varepsilon_{x'}(x',\bar{y}) &amp;= \frac{\mathrm{d}u'}{\mathrm{d}x'} -\bar{y}\frac{\mathrm{d}^2v'}{\mathrm{d}x'^2} \label{eq:strain} \\
  M(x') &amp;= EI \frac{\mathrm{d}^2v'}{\mathrm{d}x'^2} \label{eq:bendingmoment}
 \end{align}
 \column{0.5\textwidth}
 \begin{center}
  \includefigure{width=0.7\textwidth}{width=0.4\textwidth}{neutralaxis}
 \end{center}
\end{columns}</div>
<div class="math">\begin{itemize}
 \item $\bar{y}$ is the distance from the neutral axis
 \item $\frac{\mathrm{d}u'}{\mathrm{d}x'}$ is the mean axial strain---this is the same as it is for the truss element (previous lecture)
 \item $-\bar{y}\frac{\mathrm{d}^2v'}{\mathrm{d}x'^2}$ is the bending strain
\end{itemize}</div>
<p>
Once the strains are known, calculating the stress is trivial.&nbsp;\end{frame}</p>
<p>\begin{frame}{Differentiating the&nbsp;displacements}</p>
<p>We know the displacements in terms of the parametric coordinate, <span class="math">\(\xi\)</span>, from equation \eqref{eq:shapefunction}. This parametric coordinate is a transform of the element coordinate&nbsp;system:
</p>
<div class="math">\begin{itemize}
 \item The range $0 \le x' \le L$ is mapped to $-1 \le \xi \le +1$
\end{itemize}</div>
<p>
i.e. 
</p>
<div class="math">\begin{align}
 \xi(x') &amp;= 2\frac{x'}{L} - 1 \label{eq:xixtransform}
\end{align}</div>
<p>
if
</p>
<div class="math">\begin{align}
 \mathbf{u}'(\xi) &amp;= \mathbf{N}(\xi) \mathbf{u}'_{e}
\end{align}</div>
<p>
then
</p>
<div class="math">\begin{align}
 \frac{\mathrm{d}\mathbf{u}'(\xi)}{\mathrm{d}x'} &amp;= \frac{\mathrm{d}\mathbf{N}(\xi)}{\mathrm{d}x'} \mathbf{u}'_{e}
\end{align}</div>
<p>
(<span class="math">\(\mathbf{u}'_e\)</span> are the discrete (nodal) values of the displacement, they are not a differentiable function.)&nbsp;\end{frame}</p>
<div class="math">\begin{frame}{Differentiating the shape function}
 The shape functions, given in equations \eqref{eq:shapefunctions}, are given in terms of $\xi$. To differentiate with respect to the local coordinate system ($x'$):
\begin{align}
 \frac{\mathrm{d}\mathbf{N}}{\mathrm{d}x'} &amp;= \frac{\mathrm{d}\mathbf{N}}{\mathrm{d}\xi} \frac{\mathrm{d}\xi}{\mathrm{d}x'}
\end{align}
where $\mathrm{d}\xi/\mathrm{d}x'$ is given by differentiating \eqref{eq:xixtransform}, and is known as the Jacobian ($J$) of the transform. Similarly, 
\begin{align}
 \frac{\mathrm{d}^2\mathbf{N}}{\mathrm{d}x'^2} &amp;= \frac{\mathrm{d}}{\mathrm{d}x'} \frac{\mathrm{d}\mathbf{N}}{\mathrm{d}x'} \nonumber \\
 &amp;= \frac{\mathrm{d}}{\mathrm{d}x'} \frac{\mathrm{d}\mathbf{N}}{\mathrm{d}\xi} \frac{\mathrm{d}\xi}{\mathrm{d}x'} \nonumber \\
 &amp;= \frac{\mathrm{d}}{\mathrm{d}\xi} \frac{\mathrm{d}\mathbf{N}}{\mathrm{d}\xi} \frac{\mathrm{d}\xi}{\mathrm{d}x'} \frac{\mathrm{d}\xi}{\mathrm{d}x'} \nonumber \\
 &amp;= \frac{\mathrm{d}^2\mathbf{N}}{\mathrm{d}\xi^2} \left( \frac{\mathrm{d}\xi}{\mathrm{d}x'} \right)  ^2
\end{align}
\end{frame}</div>
<p>\begin{frame}{Postprocessing in <span class="caps">MATLAB</span>}
  We could write some functions,&nbsp;perhaps
</p>
<div class="math">\begin{itemize}
 \item \mcode{function N1 = shapefunction_derivative_1(xi,L)} and
 \item \mcode{function N2 = shapefunction_derivative_2(xi,L)}
\end{itemize}</div>
<p>
to return the shape function derivative matrices. Since the shape functions are functions of <span class="math">\(L\)</span>, they will need to be calculated for each element&nbsp;individually.</p>
<p>The Jacobian is also a function of <span class="math">\(L\)</span>, so will also be calculated for each&nbsp;element.</p>
<p>Then the derivatives can be calculated in the same form as equation&nbsp;\eqref{eq:shapefunction}:
</p>
<div class="math">\begin{align}
 \frac{\mathrm{d}\mathbf{u}'}{\mathrm{d}x'} &amp;= J \cdot \mathbf{N}^{(1)} \mathbf{u}'_{e} \\
 \frac{\mathrm{d}^{2}\mathbf{u}'}{\mathrm{d}x'^{2}} &amp;= J^2 \cdot \mathbf{N}^{(2)} \mathbf{u}'_{e}
\end{align}</div>
<p>
where <span class="math">\(J\)</span> is the Jacobian, and bracketed superscripts denote derivative with respect to the parametric coordinate&nbsp;system.</p>
<p>We now have sufficient information to calculate strains (and stresses) from equation \eqref{eq:strain}&nbsp;\end{frame}</p>
<p>\section{Postprocessor and&nbsp;plotting}</p>
<div class="math">\begin{frame}{A postprocessor to view the results}
\begin{itemize}
 \item In the previous lecture, the results of the analysis were presented as a MATLAB vector of values.
 \item MATLAB has some powerful plotting functions, so we can try to visualize these results to make them easier to understand.
\end{itemize}
 \begin{center}
  \includefigure{width=0.75\textwidth}{width=0.75\textwidth}{truss_tutorial}
 \end{center}
\end{frame}</div>
<p>\begin{frame}{Saving the results}
So that we don&#8217;t have to re-run the whole model every time we want to create a plot, we can save the results to a&nbsp;file. </p>
<p>\mode<article>{This step isn&#8217;t necessary for the type of problems we might be solving, but when the models become larger and take a significant amount of time to run, it is useful to be able to keep a copy of the solution vector so that it can be processed at a later&nbsp;date.}</p>
<p><span class="caps">MATLAB</span> has a function to allow any variable in memory to be saved to a \mcode{.mat} file:
 \mfile{saveexample.m}
Any string can be given as the filename (i.e. \mcode{filename} should be the name of a string variable, or the string variable itself, enclosed in \mcode{&#8216;inverted commas&#8217;}). If an extension for the filename isn&#8217;t specified, most versions of <span class="caps">MATLAB</span> will add a \mcode{.mat} at the&nbsp;end.</p>
<p>These variables can be re-read back into memory with the command:&nbsp;\mfile{loadexample.m}</p>
<p>\end{frame}</p>
<div class="math">\begin{frame}{The figure window}
\begin{itemize}
 \item The MATLAB command \mcode{figure} creates a new window for a figure (or plot). 
 \item All of the plotting commands create their own figure windows, so it's not necessary to explicitly create a `figure'.
 \item However, it's useful to use this command to ensure that a plot is created on a new figure window, and not an existing window.
\end{itemize}
 \begin{center}
   \includefigure{width=0.5\textwidth}{width=0.5\textwidth}{matlab_figure_blank}
 \end{center}
\end{frame}</div>
<div class="math">\begin{frame}{The plot command}
 The plot command in its simplest form takes two arguments: a vector of $x$-values and a vector of $y$-values, e.g.
 \begin{columns}
  \column{0.5\textwidth} \mfile{plotx2.m}
  \column{0.5\textwidth} \begin{center} \includefigure{width=1.0\textwidth}{width=0.6\textwidth}{x2} \end{center}
 \end{columns}
\end{frame}</div>
<div class="math">\begin{frame}{Formatting the plot}
 A third argument is used in the plot command to control the appearance of the plotted line. Some common options are:
\begin{center}
\rowcolors{1}{black!20}{black!10} 
\begin{tabular}{p{2.5cm}p{7.5cm}}
\textbf{symbol} &amp; \textbf{line style} \\
$-$ &amp; default \\
$--$ &amp; dashed \\
$\colon$ &amp; dotted \\
$-.$ &amp; dash-dot \\
o &amp; circle markers \\
$+$ &amp; plus sign markers \\
$\ast$ &amp; star markers \\
x &amp; cross markers \\
r,g,y,b,k &amp; colour: red, green, yellow, blue, black
\end{tabular}
\end{center}
\end{frame}</div>
<p>\begin{frame}{Using plot styles}&nbsp;\mfile{plotmesh_nodes.m}
 </p>
<div class="math">\begin{center}
   \includefigure{width=0.75\textwidth}{width=0.75\textwidth}{truss_nodes}
 \end{center}</div>
<p>The full details on the capability of the \mcode{plot} command are given by typing \mcode{help plot} at the <span class="caps">MATLAB</span> command prompt.&nbsp;\end{frame}</p>
<p>\begin{frame}{Plot lines}
 To plot the elements, we can use the \mcode{line} command. Before we do this, we use the command
\mfile{holdon.m}
to `hold&#8217; the plot, i.e. use the same figure for the next lines rather than creating a new figure&nbsp;window.</p>
<p>The \mcode{line} command is similar to the \mcode{plot} command in that it takes a list of <span class="math">\(x\)</span> and <span class="math">\(y\)</span> coordinates.
We can use it in a loop, to plot one `\mcode{line}&#8217; (with two pairs of <span class="math">\((x,y)\)</span> coordinates) for every element:&nbsp;\mfile{plotmesh_line.m}
</p>
<div class="math">\begin{center}
  \includefigure{width=0.7\textwidth}{width=0.75\textwidth}{truss_mesh}
\end{center}</div>
<p>
\end{frame}</p>
<div class="math">\begin{frame}{Adding colour}
 The \mcode{line} function also takes an argument \mcode{color} (note the incorrect spelling).
 Instead of giving the lines colours like 'b' for blue or 'r' for red, we can be more specific about the colour: the red, green and blue components can be specified as a row vector, using values between 0--1. Some examples are:
\begin{center}
\rowcolors{1}{black!20}{black!10} 
\begin{tabular}{p{2.5cm}p{7.5cm}}
\textbf{} &amp; \textbf{colour} \\
\mcode{[0,0,0]} &amp; black \\
\mcode{[1,0,0]} &amp; red \\
\mcode{[0,1,0]} &amp; green \\
\mcode{[0,0,1]} &amp; blue \\
\mcode{[1,0,1]} &amp; purple \\
\mcode{[1,1,1]} &amp; white \\
\mcode{[0.5,0,0.5]} &amp; dark purple
\end{tabular}
\end{center}
We could use the colour to represent one of the postprocressed results, e.g. stress or strain.
\mfile{line.m}
\end{frame}</div>
<div class="math">\begin{frame}{The finished postprocessor with displacements}
\begin{center}
 \includefigure{width=0.7\textwidth}{width=0.75\textwidth}{truss_output}
\end{center}
\begin{itemize}
 \item The displacement is shown by plotting $\mathbf{x} + s\mathbf{u}$, where $s$ is a scaling factor.
 \item the colour represents the stress in the elements: blue is the lowest stress, red is the highest.
\end{itemize}
\end{frame}</div>
<div class="math">\begin{frame}{The displacements for frame elements}
If the displacements are interpolated using the shape functions (at e.g. \mcode{xi = -1:0.1:1}), we can determine the displacements and plot the shape of a frame element. When plotting the line using \mcode{line(x,y)}, the parameters \mcode{x} and \mcode{y} will both be vectors.
\begin{center}
 \includefigure{width=0.7\textwidth}{width=0.75\textwidth}{frame_output}
\end{center}
\begin{itemize}
 \item The line command does not allow for change in colour along the length of a single line, so we can't use this command to plot variables that are a function of $x'$, such as bending moment. 
\end{itemize}
\end{frame}</div>
<p>\section{Conclusions}
</p>
<div class="math">\begin{frame}{\mode&lt;presentation&gt;{Conclusions}}
 \begin{itemize}
  \item We now have a pretty complete programme for performing both truss and frame analysis
\begin{itemize}
 \item it can incorporate boundary conditions aligned in the global or the element coordinate systems
 \item it can also calculate the derived quantities in the postprocessor using shape functions and their derivatives
\end{itemize}
  \item We've got an idea of the process of writing a MATLAB programme, including how to step through the code using the debugger to look for errors
  \item We can also use MATLAB to create graphical output to help with the interpretation of results
 \end{itemize}
\end{frame}</div>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' }, Macros: {} }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="//amit.visrolia.net/tag/matlab.html">matlab</a>
      <a href="//amit.visrolia.net/tag/code.html">code</a>
      <a href="//amit.visrolia.net/tag/teaching.html">teaching</a>
      <a href="//amit.visrolia.net/tag/bath.html">bath</a>
    </p>
  </div>



</article>

    <footer>
<p>&copy; Amit Visrolia 2016</p>
    </footer>
  </main>


<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Amit's notes ",
  "url" : "//amit.visrolia.net",
  "image": "",
  "description": "Amit's notes, links, and pictures"
}
</script>
</body>
</html>